(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(t,e,n){t.exports=n(49)},35:function(t,e,n){},37:function(t,e,n){},49:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(24),o=n.n(c),i=(n(35),n(6)),u=n(7),l=n(9),s=n(8),d=n(10),m=(n(37),n(25)),p=n.n(m),f=n(26),h=n(11),v=n.n(h),E=n(12),g=n(27),b=n.n(g),y="https://rest-api-broot.glitch.me/api/taraschuiko";function O(t){return fetch("".concat(y,"/products/").concat(t)).then(function(t){return t.json()})}var j,w=(j=function(t){return fetch("".concat(y,"/products?").concat(b.a.stringify(t))).then(function(t){return t.json()})},{state:{list:[]},reducers:{setList:function(t,e){t.list=e}},effects:function(t){return{loadAll:function(){var t=Object(E.a)(v.a.mark(function t(e,n){var a=this;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:j(e).then(function(t){return a.setList(t)});case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),loadOne:function(){var t=Object(E.a)(v.a.mark(function t(e,n){var a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e);case 2:a=t.sent,this.setList([a]);case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}}});var N,k=(N=function(){return fetch("".concat(y,"/categories")).then(function(t){return t.json()})},{state:{list:[]},reducers:{setList:function(t,e){t.list=e}},effects:function(t){return{loadAll:function(){var t=Object(E.a)(v.a.mark(function t(e,n){var a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:a=t.sent,this.setList(a);case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}}}),P={state:{items:[]},reducers:{addProduct:function(t,e){var n=t.items.find(function(t){return t.product.id===e.id});n?n.quantity+=1:t.items.push({product:e,quantity:1})},removeProduct:function(t,e){t.items=t.items.filter(function(t){return t.product.id!==e})},setQuantity:function(t,e,n){0===n?t.items=t.items.filter(function(t){return t.product.id!==e}):t.items.find(function(t){return t.product.id===e}).quantity=n}}},C="cart";var x={products:w,categories:k,cart:P},q=Object(f.init)({models:x,plugins:[p()()],redux:{initialState:{},middlewares:[function(t){return function(e){return function(n){console.log("dispatching",n);var a=e(n);return console.log("next state",t.getState()),a}}}]}});q.subscribe(function(){!function(t){var e=t.getState().cart;localStorage.setItem(C,JSON.stringify(e))}(q)}),window.store=q;var I=q,Q=n(4),S=n(51),A=n(50),D=n(53),L=n(52);var $=Object(Q.b)(null,function(t,e){return{addProductToCart:function(){return t.cart.addProduct(e.product)}}})(function(t){var e=t.product,n=(t.category,t.addProductToCart);return r.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 product-card"},r.a.createElement(A.a,{to:"/products/".concat(e.id)},r.a.createElement("div",null,r.a.createElement("img",{src:e.image,alt:"Product"}),r.a.createElement("p",null,e.name),r.a.createElement("p",null,"$",e.price))),r.a.createElement("button",{onClick:n},"Add to cart"))}),T=function(t){var e=t.category;return r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement(A.a,{to:"/categories/".concat(e.id)}," ",e.name," ")))};function W(t){return t.items.reduce(function(t,e){return t+e.quantity},0)}function J(t,e){var n=t.items.reduce(function(t,e){var n=e.product,a=e.quantity;return t+n.price*a},0);return Number(n).toFixed(2)}var B=Object(Q.b)(function(t){return{productsQuantity:W(t.cart),totalPrice:J(t.cart)}})(function(t){var e=t.productsQuantity,n=t.totalPrice;return r.a.createElement(A.a,{to:"/cart",className:"cart-button col-12"},"You have ",e," products in your cart. The total price is"," $",n)});function M(t,e){return e.find(function(e){return e.id===t.categoryId})}var Y=function(t){function e(){return Object(i.a)(this,e),Object(l.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.loadData(this.props)}},{key:"componentWillReceiveProps",value:function(t){t.match.url!==this.props.match.url&&this.loadData(t)}},{key:"loadData",value:function(t){var e={};"/categories/:id"===t.match.path&&(e={filter:{categoryId:t.match.params.id}}),t.loadProducts(e),t.loadCategories()}},{key:"render",value:function(){var t=this;return r.a.createElement("section",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(B,null)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-2"},r.a.createElement("h4",null,"Categories"),r.a.createElement("ul",{className:"categories"},this.props.categories.map(function(t){return r.a.createElement(T,{key:t.id,category:t})}))),r.a.createElement("div",{className:"col-12 col-lg-10"},r.a.createElement("h2",null,"Products"),r.a.createElement("div",{className:"row"},this.props.products.map(function(e){return r.a.createElement($,{key:e.id,product:e,category:M(e,t.props.categories)})}))))))}}]),e}(r.a.Component),F=Object(Q.b)(function(t){return{products:t.products.list,categories:t.categories.list}},function(t){var e=t.products,n=t.categories;return{loadProducts:e.loadAll,loadCategories:n.loadAll}})(Y),R=function(t){var e=t.product;return r.a.createElement("section",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement("img",{src:e.image,alt:"Image",className:"product-extended-image"})),r.a.createElement("div",{className:"col-9"},r.a.createElement("h2",null,e.name),r.a.createElement("p",null,e.description),r.a.createElement("h3",null,"$",e.price)))))},z=function(t){function e(){return Object(i.a)(this,e),Object(l.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.props.loadOne(this.props.match.params.id)}},{key:"render",value:function(){return this.props.product?r.a.createElement(R,{product:this.props.product}):r.a.createElement("p",null,"Warning")}}]),e}(r.a.Component),G=Object(Q.b)(function(t,e){return{product:t.products.list.find(function(t){return t.id===e.match.params.id}),productId:e.match.params.id}},function(t){return{loadOne:t.products.loadOne}})(z);var H=Object(Q.b)(null,function(t,e){var n=t.cart,a=e.quantity,r=e.product;return{addOne:function(){return n.setQuantity(r.id,a+1)},removeOne:function(){return n.setQuantity(r.id,a-1)},remove:function(){return n.removeProduct(r.id)}}})(function(t){var e=t.product,n=t.quantity,a=t.addOne,c=t.removeOne,o=t.remove;return r.a.createElement("div",{className:"cartItem"},r.a.createElement(A.a,{to:"/products/".concat(e.id)},e.name),r.a.createElement("button",{onClick:c},"-"),n,r.a.createElement("button",{onClick:a},"+"),r.a.createElement("button",{onClick:o},"x"))});var K=function(t){function e(){return Object(i.a)(this,e),Object(l.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.cartItems,n=t.productsQuantity,a=t.totalPrice;return r.a.createElement("section",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",null,"Cart"),r.a.createElement("p",null,"You have ",n," products in your cart. The total price is"," $",a),e.map(function(t){return r.a.createElement(H,{key:t.product.id,product:t.product,quantity:t.quantity})})))))}}]),e}(r.a.Component),U=Object(Q.b)(function(t){var e=t.cart;return{cartItems:e.items,productsQuantity:W(e),totalPrice:J(e)}})(K),V=function(t){function e(){return Object(i.a)(this,e),Object(l.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return r.a.createElement(Q.a,{store:I},r.a.createElement(S.a,null,r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(A.a,{to:"/",className:"col-12 col-sm-3"},r.a.createElement("img",{src:"../../data/img/logo.png",alt:"Shop",className:"header-logo"}))))),r.a.createElement(D.a,null,r.a.createElement(L.a,{path:"/cart",component:U}),r.a.createElement(L.a,{path:"/products/:id",component:G}),r.a.createElement(L.a,{path:"/categories/:id",component:F}),r.a.createElement(L.a,{exact:!0,path:"/",component:F})),r.a.createElement("footer",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-12"},"\xa9 2018")))))))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.ca3211ee.chunk.js.map