(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(t,e,a){t.exports=a(49)},35:function(t,e,a){},37:function(t,e,a){},49:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(24),o=a.n(c),u=(a(35),a(6)),i=a(7),s=a(9),l=a(8),d=a(10),p=(a(37),a(25)),m=a.n(p),f=a(26),h=a(11),v=a.n(h),E=a(12),g=a(27),b=a.n(g),y="https://rest-api-broot.glitch.me/api/taraschuiko";function O(t){return fetch("".concat(y,"/products/").concat(t)).then(function(t){return t.json()})}var j,w=(j=function(t){return fetch("".concat(y,"/products?").concat(b.a.stringify(t))).then(function(t){return t.json()})},{state:{list:[]},reducers:{setList:function(t,e){t.list=e}},effects:function(t){return{loadAll:function(){var t=Object(E.a)(v.a.mark(function t(e,a){var n=this;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:j(e).then(function(t){return n.setList(t)});case 1:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),loadOne:function(){var t=Object(E.a)(v.a.mark(function t(e,a){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e);case 2:n=t.sent,this.setList([n]);case 4:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()}}});var N,k=(N=function(){return fetch("".concat(y,"/categories")).then(function(t){return t.json()})},{state:{list:[]},reducers:{setList:function(t,e){t.list=e}},effects:function(t){return{loadAll:function(){var t=Object(E.a)(v.a.mark(function t(e,a){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:n=t.sent,this.setList(n);case 4:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()}}}),P={state:{products:[]},reducers:{addProduct:function(t,e){var a=t.products.find(function(t){return t.productId===e});a?a.quantity+=1:t.products.push({productId:e,quantity:1})},removeProduct:function(t,e){t.products=t.products.filter(function(t){return t.productId!==e})},setQuantity:function(t,e,a){t.products.find(function(t){return t.id===e}).quantity=a}}},I={products:w,categories:k,cart:P},C=Object(f.init)({models:I,plugins:[m()()]});window.store=C;var x=C,q=a(5),A=a(51),D=a(50),L=a(53),T=a(52);var W=Object(q.b)(null,function(t,e){return{addProductToCart:function(){return t.cart.addProduct(e.product.id)}}})(function(t){var e=t.product,a=(t.category,t.addProductToCart);return r.a.createElement("div",{className:"col-3 product-card"},r.a.createElement(D.a,{to:"/products/".concat(e.id)},r.a.createElement("div",null,r.a.createElement("img",{src:e.image,alt:"Image"}),r.a.createElement("p",null,e.name),r.a.createElement("p",null,"$",e.price))),r.a.createElement("button",{onClick:a},"Add to cart"))}),$=function(t){var e=t.category;return r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement(D.a,{to:"/categories/".concat(e.id)}," ",e.name," ")))};function M(t,e){return t.products.reduce(function(t,a){var n=a.productId,r=a.quantity;return t+e.find(function(t){return t.id===n}).price*r},0)}var Q=Object(q.b)(function(t){return{productsQuantity:(e=t.cart,e.products.reduce(function(t,e){return t+e.quantity},0)),totalPrice:M(t.cart,t.products.list)};var e})(function(t){var e=t.productsQuantity,a=t.totalPrice;return r.a.createElement(D.a,{to:"/cart",className:"cart-button col-12"},"You have ",e," products in your cart. The total price is"," $",a)});function B(t,e){return e.find(function(e){return t.categoryId===e.id})}var J=function(t){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){this.loadData(this.props)}},{key:"componentWillReceiveProps",value:function(t){t.match.url!==this.props.match.url&&this.loadData(t)}},{key:"loadData",value:function(t){var e={};"/categories/:id"===t.match.path&&(e={filter:{categoryId:t.match.params.id}}),t.loadProducts(e),t.loadCategories()}},{key:"render",value:function(){var t=this;return r.a.createElement("section",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(Q,null)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-2"},r.a.createElement("h4",null,"Categories"),r.a.createElement("ul",{className:"categories"},this.props.categories.map(function(t){return r.a.createElement($,{key:t.id,category:t})}))),r.a.createElement("div",{className:"col-12 col-lg-10"},r.a.createElement("h2",null,"Products"),r.a.createElement("div",{className:"row"},this.props.products.map(function(e){return r.a.createElement(W,{key:e.id,product:e,category:B(e,t.props.categories),addProductToCart:P.addProduct})}))))))}}]),e}(r.a.Component),R=Object(q.b)(function(t){return{products:t.products.list,categories:t.categories.list}},function(t){var e=t.products,a=t.categories;return{loadProducts:e.loadAll,loadCategories:a.loadAll}})(J),S=function(t){var e=t.product;return r.a.createElement("section",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"},r.a.createElement("img",{src:e.image,alt:"Image",className:"product-extended-image"})),r.a.createElement("div",{className:"col-10"},r.a.createElement("h2",null,e.name),r.a.createElement("p",null,e.description),r.a.createElement("h3",null,"$",e.price)))))},Y=function(t){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){this.props.loadOne(this.props.match.params.id)}},{key:"render",value:function(){return this.props.product?r.a.createElement(S,{product:this.props.product}):r.a.createElement("p",null,"Warning")}}]),e}(r.a.Component),z=Object(q.b)(function(t,e){return{product:t.products.list.find(function(t){return t.id===e.match.params.id}),productId:e.match.params.id}},function(t){return{loadOne:t.products.loadOne}})(Y);var F=function(t){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){this.props.loadProducts()}},{key:"render",value:function(){var t=this;return r.a.createElement("section",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",null,"Cart"),this.props.cartItems.map(function(e){return r.a.createElement("div",{key:e.productId},(a=t.props.products,n=e.productId,a.find(function(t){return t.id===n})).name," - ",e.quantity);var a,n})))))}}]),e}(r.a.Component),G=Object(q.b)(function(t){return{products:t.products.list,cartItems:t.cart.products}},function(t){return{loadProducts:t.products.loadAll}})(F),H=function(t){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return r.a.createElement(q.a,{store:x},r.a.createElement(A.a,null,r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(D.a,{to:"/",className:"col-12 col-sm-3"},r.a.createElement("img",{src:"../../data/img/logo.png",alt:"Shop",className:"header-logo"}))))),r.a.createElement(L.a,null,r.a.createElement(T.a,{path:"/cart",component:G}),r.a.createElement(T.a,{path:"/products/:id",component:z}),r.a.createElement(T.a,{path:"/categories/:id",component:R}),r.a.createElement(T.a,{exact:!0,path:"/",component:R})),r.a.createElement("footer",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-12"},"\xa9 2018")))))))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.44129fc9.chunk.js.map